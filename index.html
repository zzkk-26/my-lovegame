<!DOCTYPE html>
<html lang="zh">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>å¥”å‘ä½ çš„çˆ± - ç¥ä½ æœ‰ä¸ªå¿«ä¹çš„ä¸€å¤©</title>
    <style>
        body {
            margin: 0;
            padding: 0;
            overflow: hidden;
            font-family: Arial, sans-serif;
            touch-action: manipulation;
            user-select: none;
        }
        
        #game-container {
            position: relative;
            width: 100vw;
            height: 100vh;
            background-color: #FFF8E1; /* ç±³é»„è‰²èƒŒæ™¯ */
            overflow: hidden;
        }
        
        #start-screen {
            position: absolute;
            width: 100%;
            height: 100%;
            background-color: #FFD700;
            display: flex;
            flex-direction: column;
            justify-content: center;
            align-items: center;
            z-index: 100;
        }
        
        #start-screen h1 {
            font-size: 2.5rem;
            color: #FF4081;
            margin-bottom: 2rem;
            text-align: center;
        }
        
        #start-button {
            padding: 15px 30px;
            font-size: 1.5rem;
            background-color: #FF4081;
            color: white;
            border: none;
            border-radius: 50px;
            cursor: pointer;
            box-shadow: 0 4px 8px rgba(0, 0, 0, 0.2);
        }
        
        #game-screen {
            position: absolute;
            width: 100%;
            height: 100%;
            display: none;
        }
        
        .lane {
            position: absolute;
            height: 100%;
            border-right: 2px dashed #795548;
        }
        
        #shop-lane {
            width: 30%;
            left: 0;
            background-color: #FFF8E1;
            overflow: hidden;
        }
        
        #lane1 {
            width: 35%;
            left: 30%;
        }
        
        #lane2 {
            width: 35%;
            left: 65%;
        }
        
        #player {
            position: absolute;
            width: 50px;
            height: 80px;
            bottom: 100px;
            left: 47.5%;
            font-size: 40px;
            text-align: center;
            transition: left 0.3s ease;
            z-index: 10;
        }
        
        .obstacle {
            position: absolute;
            width: 50px;
            height: 50px;
            font-size: 30px;
            text-align: center;
            z-index: 5;
        }
        
        .shop {
            position: absolute;
            width: 90%;
            height: 80px;
            background-color: white;
            border-radius: 10px;
            display: flex;
            justify-content: center;
            align-items: center;
            font-size: 14px;
            font-weight: bold;
            box-shadow: 0 2px 5px rgba(0, 0, 0, 0.1);
            z-index: 2;
            writing-mode: vertical-rl;
            text-orientation: mixed;
            padding: 10px 0;
        }
        
        #distance {
            position: absolute;
            top: 20px;
            left: 50%;
            transform: translateX(-50%);
            font-size: 1.5rem;
            color: #333;
            background-color: rgba(255, 255, 255, 0.7);
            padding: 5px 15px;
            border-radius: 20px;
            z-index: 20;
        }
        
        #lives {
            position: absolute;
            top: 20px;
            left: 20px;
            font-size: 1.5rem;
            color: #FF4081;
            z-index: 20;
        }
        
        #end-screen {
            position: absolute;
            width: 100%;
            height: 100%;
            background-color: rgba(255, 216, 225, 0.9);
            display: none;
            flex-direction: column;
            justify-content: center;
            align-items: center;
            z-index: 200;
        }
        
        #end-screen h1 {
            font-size: 3rem;
            color: #FF4081;
            margin-bottom: 1rem;
            text-align: center;
            animation: rainbow 2s infinite;
        }
        
        #end-screen p {
            font-size: 1.5rem;
            color: #795548;
            margin-bottom: 2rem;
            text-align: center;
        }
        
        #restart-button {
            padding: 15px 30px;
            font-size: 1.5rem;
            background-color: #FF4081;
            color: white;
            border: none;
            border-radius: 50px;
            cursor: pointer;
            box-shadow: 0 4px 8px rgba(0, 0, 0, 0.2);
        }
        
        .cat {
            position: absolute;
            width: 40px;
            height: 40px;
            font-size: 30px;
            text-align: center;
            z-index: 5;
            animation: float 2s infinite ease-in-out;
        }
        
        @keyframes float {
            0%, 100% { transform: translateY(0); }
            50% { transform: translateY(-10px); }
        }
        
        @keyframes rainbow {
            0% { color: #FF4081; }
            20% { color: #FF5722; }
            40% { color: #FFC107; }
            60% { color: #4CAF50; }
            80% { color: #2196F3; }
            100% { color: #9C27B0; }
        }
        
        .meow-effect {
            position: absolute;
            font-size: 2rem;
            color: #FF4081;
            animation: meow 1.5s forwards;
            z-index: 30;
            pointer-events: none;
        }
        
        @keyframes meow {
            0% { opacity: 1; transform: scale(1); }
            100% { opacity: 0; transform: scale(3); }
        }
        
        /* æƒ…ä¹¦æ ·å¼ */
        #love-letter {
            position: fixed; /* æ”¹ä¸ºfixedå®šä½ */
            top: 50%;        /* æ–°å¢ */
            left: 50%;       /* æ–°å¢ */
            transform: translate(-50%, -50%); /* æ–°å¢å±…ä¸­æ•ˆæœ */
            width: 80%;
            max-width: 600px;
            background-color: rgba(255, 245, 245, 0.95);
            border-radius: 15px;
            padding: 20px;
            box-shadow: 0 5px 15px rgba(0, 0, 0, 0.2);
            display: none;
            flex-direction: column;
            z-index: 210;
            max-height: 70vh;
            overflow-y: auto;
        }
        
        #love-letter h2 {
            color: #FF4081;
            text-align: center;
            margin-bottom: 20px;
        }
        
        .love-letter-content {
            font-size: 1.1rem;
            line-height: 1.6;
            color: #555;
        }
        
        .love-letter-line {
            opacity: 0;
            transform: translateY(20px);
            animation: fadeInUp 0.8s forwards;
            margin-bottom: 15px;
        }
        
        @keyframes fadeInUp {
            to {
                opacity: 1;
                transform: translateY(0);
            }
        }
        
        .heart-decoration {
            position: absolute;
            font-size: 20px;
            color: #FF4081;
            opacity: 0.6;
            z-index: -1;
            animation: float 3s infinite ease-in-out;
        }
    </style>
</head>
<body>
    <div id="game-container">
        <div id="start-screen">
            <h1>å¥”å‘ä½ çš„çˆ±<br>æ¸¸æˆè§„åˆ™ï¼šç‚¹å‡»å±å¹•èº²é¿è¡Œäººï¼</h1>
            <button id="start-button">ä¸‹åœ°é“ï¼Œå»kkone</button>
        </div>
        
        <div id="game-screen">
            <div id="shop-lane" class="lane"></div>
            <div id="lane1" class="lane"></div>
            <div id="lane2" class="lane"></div>
            
            <div id="player">ğŸ‘©</div>
            
            <div id="distance">0 / 15000 è·ç¦»ç›®çš„åœ°</div>
            <div id="lives">â¤ï¸â¤ï¸â¤ï¸</div>
        </div>
        
        <div id="end-screen">
            <h1>è€å©†ç”Ÿæ—¥å¿«ä¹ï¼</h1>
            <p>ä½ æˆåŠŸæ‰¾åˆ°äº†æˆ‘ï¼Œæ¥åˆ°æˆ‘èº«è¾¹å•¦ï¼</p>
            <h2>æœ¬æ¬¡æˆç»©ï¼š15000</h2>
            <button id="restart-button">å†ç©ä¸€æ¬¡</button>
        </div>
        
        <div id="love-letter">
            <h2>ç»™æœ€çˆ±çš„ä½ </h2>
            <div class="love-letter-content" id="love-letter-content"></div>
            <button id="close-letter" style="margin-top: 20px; padding: 10px 20px; background-color: #FF4081; color: white; border: none; border-radius: 50px; cursor: pointer;">å…³é—­æƒ…ä¹¦</button>
        </div>
    </div>

    <script>
        // æ¸¸æˆå˜é‡
        let gameRunning = false;
        let playerLane = 1; // 1æˆ–2
        let distance = 0;
        let lives = 3;
        let obstacles = [];
        let shops = [];
        let cats = [];
        let baseSpeed = 2; // åŸºç¡€é€Ÿåº¦é™ä½
        let gameSpeed = baseSpeed;
        let lastObstacleTime = 0;
        let lastShopTime = 0;
        let lastCatTime = 0;
        let animationFrameId;
        
        // DOMå…ƒç´ 
        const startScreen = document.getElementById('start-screen');
        const gameScreen = document.getElementById('game-screen');
        const endScreen = document.getElementById('end-screen');
        const startButton = document.getElementById('start-button');
        const restartButton = document.getElementById('restart-button');
        const player = document.getElementById('player');
        const distanceDisplay = document.getElementById('distance');
        const livesDisplay = document.getElementById('lives');
        const shopLane = document.getElementById('shop-lane');
        const lane1 = document.getElementById('lane1');
        const lane2 = document.getElementById('lane2');
        const loveLetter = document.getElementById('love-letter');
        const closeLetterBtn = document.getElementById('close-letter');
        
        // åº—é“ºåç§°åˆ—è¡¨
        const shopNames = [
            "ç‘å¹¸", "å–œèŒ¶", "æ‚ ç±³å½©è›‹", "ç²¤èœç‹åºœ", 
            "è¥¿è¥¿å¼—", "åè¡—å”å¨", "ä¼˜è¡£åº“", 
            "å®¢è¯­", "KKVä¸»åŠ›åº—", "å°ç±³ä¹‹å®¶", "èŒ¶ç†å®œä¸–", 
            "çŒ«åº—", "å›½é™…å½±åŸ", "å¤ªäºŒé…¸èœé±¼", "ä¸œæ–¹å¥èº«", "è´¹å¤§å¨"
        ];
        
        // æƒ…ä¹¦å†…å®¹
        const loveLetterLines = [
            "äº²çˆ±çš„ä½ ï¼š",
            "è¿˜è®°å¾—KKONEåˆé‡é‚£å¤©å—ï¼Ÿæˆ‘åœ¨é‚£ç­‰ç€ä½ ï¼Œä½ å†’å‡ºæ¥æ‰¾åˆ°äº†æˆ‘ã€‚è¿™æ˜¯ä¸€ä¸ªç”·å­©å¥³å­©ç›¸é‡çš„æ•…äº‹ï¼Œæ˜¯çš„ï¼Œæˆ‘ä»¬ä»è¿™é‡Œå¼€å¯äº†çˆ±æƒ…æ•…äº‹ã€‚",
            "é‚£æ˜¯ç¬¬ä¸€æ¬¡å’Œä¸€ä¸ªå¥³å­©å»åƒæ¹˜èœï¼Œä»æœ€åˆçš„æ‹˜è°¨åˆ°åæ¥çš„è°ˆç¬‘ï¼Œä½ ç‰¹æ„ä¸ºå½“æ—¶ä¸åƒè¾£çš„æˆ‘ç‚¹çš„æ’éª¨ï¼Œç°åœ¨æƒ³èµ·è¿˜æ˜¯æš–æš–çš„ã€‚è°èƒ½æƒ³åˆ°ï¼Œåé¢æˆ‘ä»¬å°±è¿™æ ·çªç„¶åˆè‡ªç„¶åœ°ç‰µèµ·äº†æ‰‹ã€‚",
            "æˆ‘åœ¨åœ°é“ä¸Šç¬¬ä¸€æ¬¡å‘è¡¨ æ€»ä¼šæœ‰æœºä¼šçš„ çš„åè¨€ï¼Œè¢«ä½ è®°å¿†è‡³ä»Šã€‚",
            "ç¬¬ä¸€æ¬¡å»å¹æµ·é£ï¼Œæˆ‘ä»¬å¸¦ç€åƒåƒå–å–åœ¨çº¢æ ‘æ—çš„è‰åœ°ä¸Šæ‚ æ‚ é—²é—²çš„åº¦è¿‡ä¸€å¤©ï¼Œäº«å—ç€æ¸©å’Œçš„é˜³å…‰ã€‚",
            "ç¬¬ä¸€æ¬¡åœ¨æ¢…èŠ±æ—é‡Œï¼Œé‚£æ˜¯æˆ‘ä»¬å»æ¢…å›­ä¸æ–­æ‹‰æ‰¯ä¸æ–­æ¢å¯»å¯¹æ–¹çœŸå¿ƒçš„è¿‡ç¨‹ã€‚ä¹°ä¸Šäº†é…’ï¼Œå»è€Œåˆè¿”ï¼Œä½ åœ¨é‚£é‡Œè¯•å›¾ç”¨é…’è¯•å‡ºæˆ‘çš„çœŸå¿ƒã€‚",
            "ç¬¬ä¸€æ¬¡ç©æµ·æœ€æ˜¯éš¾å¿˜â€”â€”ä½ åœ¨è½¦é‡Œå·åƒæ¯›è±†çš„å¯çˆ±æ¨¡æ ·ï¼Œæˆ‘ä»¬åœ¨æµªèŠ±é‡Œå¬‰é—¹ï¼Œé›¨ä¸­å“†å—¦ç€æ¡è´å£³å´èˆä¸å¾—ç¦»å¼€ï¼Œæ”¾ç€æˆ‘é¥¥è‚ è¾˜è¾˜æ‰¾åƒå¾—ã€‚è¿™äº›ç¬¬ä¸€æ¬¡ï¼Œæˆ‘éƒ½å¥½å¥½æ”¶åœ¨è®°å¿†é‡Œäº†ã€‚",
            "è¿™äº›ç¬¬ä¸€æ¬¡ï¼Œåªæ˜¯æˆ‘ä»¬æ•…äº‹çš„å¼€å§‹ã€‚åˆ°ç°åœ¨åˆä¸å•å•æ˜¯çˆ±æƒ…æ•…äº‹äº†ï¼Œæˆ‘ä»¬åˆæ·»åŠ äº†ä¸€ä¸ªäººï¼Œæˆ‘ä»¬çš„ç¾ç»Šæ›´åŠ æ·±ã€‚è™½ç„¶æˆ‘å’Œä½ èƒ½åˆ›é€ çš„ç¬¬ä¸€æ¬¡è¶Šæ¥è¶Šå°‘ï¼Œä½†æ˜¯ ä¸€è¾ˆå­ å´æ˜¯è¶Šæ¥è¶Šæ·±ã€‚",
            "æˆ‘ä»¬ä¼šæœ‰è¶Šæ¥è¶Šå¤šçš„ç¬¬Næ¬¡å»åƒæ¹˜èœï¼Œå»å¹æµ·é£ï¼Œå»æ ‘æ—é‡Œé‡é¤ï¼Œå»ç©æµ·æ¡è´å£³ï¼Œå¯èƒ½æ˜¯æˆ‘ä»¬ä¸¤ä¸ªï¼Œä¹Ÿå¯èƒ½ä¸æ­¢æˆ‘ä»¬ä¸¤ä¸ªäººã€‚"
        ];
        
        // å¼€å§‹æ¸¸æˆ
        startButton.addEventListener('click', startGame);
        restartButton.addEventListener('click', startGame);
        closeLetterBtn.addEventListener('click', function() {
            loveLetter.style.display = 'none';
        });
        
        // ç‚¹å‡»åˆ‡æ¢è·‘é“
        gameScreen.addEventListener('click', function() {
            if (!gameRunning) return;
            
            if (playerLane === 1) {
                playerLane = 2;
                player.style.left = '82.5%';
            } else {
                playerLane = 1;
                player.style.left = '47.5%';
            }
        });
        
        function startGame() {
            // é‡ç½®æ¸¸æˆçŠ¶æ€
            gameRunning = true;

            playerLane = 1;

            distance = 0;

            lives = 3;
        
    obstacles = [];
        
    shops = [];

            cats = [];

            baseSpeed = 2;

            gameSpeed = baseSpeed;

            lastObstacleTime = Date.now(); // åˆå§‹åŒ–ä¸ºå½“å‰æ—¶é—´

            lastShopTime = Date.now();
            lastCatTime = Date.now();
            
            // æ›´æ–°æ˜¾ç¤º
            player.style.left = '47.5%';
            distanceDisplay.textContent = '0 / 15000 è·ç¦»ç›®çš„åœ°';
            livesDisplay.textContent = 'â¤ï¸â¤ï¸â¤ï¸';
            
            // æ¸…é™¤æ‰€æœ‰éšœç¢ç‰©ã€åº—é“ºå’ŒçŒ«
            document.querySelectorAll('.obstacle, .shop, .cat, .meow-effect').forEach(el => el.remove());
            
            // æ˜¾ç¤ºæ¸¸æˆç”»é¢ï¼Œéšè—å…¶ä»–
            startScreen.style.display = 'none';
            endScreen.style.display = 'none';
            gameScreen.style.display = 'block';
            loveLetter.style.display = 'none';
            
            // å¼€å§‹æ¸¸æˆå¾ªç¯
            if (animationFrameId) {
                cancelAnimationFrame(animationFrameId);
            }
            gameLoop();
        }
        
        function gameLoop() {
            if (!gameRunning) return;
            // æ›´æ–°è·ç¦»
            distance += gameSpeed;
            distanceDisplay.textContent = `${Math.min(distance, 15000)} / 15000 è·ç¦»ç›®çš„åœ°`;
            
            // æ£€æŸ¥æ˜¯å¦åˆ°è¾¾ç»ˆç‚¹
            if (distance >= 15000) {
                endGame(true);
                return;
            }
            
            // éšç€è·ç¦»å¢åŠ ï¼Œæ¸¸æˆé€Ÿåº¦é€æ¸åŠ å¿«
            if (distance < 5000) {
                gameSpeed = baseSpeed + Math.floor(distance / 1500);
            } else if (distance < 11000) {
                gameSpeed = baseSpeed + 3 + Math.floor((distance - 5000) / 2000);
            } else {
                gameSpeed = baseSpeed + 6 + Math.floor((distance - 11000) / 2000);
            }

            // ç”Ÿæˆéšœç¢ç‰©
            const currentTime = Date.now();
            if (currentTime - lastObstacleTime > 1500 - Math.min(distance / 10, 1000)) {
                createObstacle();
                lastObstacleTime = currentTime;
            }
            
            // ç”Ÿæˆåº—é“º
            if (currentTime - lastShopTime > 2000) {
                createShop();
                lastShopTime = currentTime;
            }
            
            // ç”Ÿæˆé»‘çŒ«ï¼ˆå½©è›‹ï¼‰
            if (currentTime - lastCatTime > 15000 && Math.random() < 0.15) {
                createCat();
                lastCatTime = currentTime;
            }
            
            // ç§»åŠ¨éšœç¢ç‰©
            moveObstacles();
            
            // ç§»åŠ¨åº—é“º
            moveShops();
            
            // ç§»åŠ¨çŒ«
            moveCats();
            
            // æ£€æµ‹ç¢°æ’
            checkCollisions();
            
            // ç»§ç»­æ¸¸æˆå¾ªç¯
            animationFrameId = requestAnimationFrame(gameLoop);
        }
        
        function createObstacle() {
            const lane = Math.random() < 0.5 ? 1 : 2;
            const obstacle = document.createElement('div');
            obstacle.className = 'obstacle';
            obstacle.innerHTML = 'ğŸš¶';
            
            const left = lane === 1 ? '47.5%' : '82.5%';
            obstacle.style.left = left;
            obstacle.style.top = '-50px';
            
            gameScreen.appendChild(obstacle);
            
            obstacles.push({
                element: obstacle,
                lane: lane,
                top: -50,
                width: 50,
                height: 50
            });
        }
        
        function createShop() {
            const shop = document.createElement('div');
            shop.className = 'shop';
            
            // éšæœºé€‰æ‹©åº—é“ºåç§°
            const shopName = shopNames[Math.floor(Math.random() * shopNames.length)];
            shop.textContent = shopName;
            
            shop.style.left = '5%';
            shop.style.top = '-80px';
            
            shopLane.appendChild(shop);
            
            shops.push({
                element: shop,
                top: -80,
                width: 90,
                height: 80
            });
        }
        
        function createCat() {
            const lane = Math.random() < 0.5 ? 1 : 2;
            const cat = document.createElement('div');
            cat.className = 'cat';
            cat.innerHTML = 'ğŸˆâ€';
            
            const left = lane === 1 ? '47.5%' : '82.5%';
            cat.style.left = left;
            cat.style.top = '-40px';
            
            gameScreen.appendChild(cat);
            
            cats.push({
                element: cat,
                lane: lane,
                top: -40,
                width: 40,
                height: 40
            });
        }
        
        function moveObstacles() {
            for (let i = obstacles.length - 1; i >= 0; i--) {
                const obstacle = obstacles[i];
                obstacle.top += gameSpeed;
                obstacle.element.style.top = `${obstacle.top}px`;
                
                // ç§»é™¤è¶…å‡ºå±å¹•çš„éšœç¢ç‰©
                if (obstacle.top > window.innerHeight) {
                    obstacle.element.remove();
                    obstacles.splice(i, 1);
                }
            }
        }
        
        function moveShops() {
            for (let i = shops.length - 1; i >= 0; i--) {
                const shop = shops[i];
                shop.top += gameSpeed * 0.8; // åº—é“ºç§»åŠ¨é€Ÿåº¦è¾ƒæ…¢
                shop.element.style.top = `${shop.top}px`;
                
                // ç§»é™¤è¶…å‡ºå±å¹•çš„åº—é“º
                if (shop.top > window.innerHeight) {
                    shop.element.remove();
                    shops.splice(i, 1);
                }
            }
        }
        
        function moveCats() {
            for (let i = cats.length - 1; i >= 0; i--) {
                const cat = cats[i];
                cat.top += gameSpeed;
                cat.element.style.top = `${cat.top}px`;
                
                // ç§»é™¤è¶…å‡ºå±å¹•çš„çŒ«
                if (cat.top > window.innerHeight) {
                    cat.element.remove();
                    cats.splice(i, 1);
                }
            }
        }
        
        function checkCollisions() {
            // ç©å®¶ä½ç½®å’Œå°ºå¯¸
            const playerRect = {
                left: playerLane === 1 ? window.innerWidth * 0.475 : window.innerWidth * 0.825,
                top: window.innerHeight - 180,
                width: 50,
                height: 80
            };
            
            // æ£€æŸ¥ä¸éšœç¢ç‰©çš„ç¢°æ’
            for (let i = 0; i < obstacles.length; i++) {
                const obstacle = obstacles[i];
                
                if (
                    obstacle.lane === playerLane &&
                    obstacle.top + obstacle.height > playerRect.top &&
                    obstacle.top < playerRect.top + playerRect.height
                ) {
                    // ç¢°æ’å‘ç”Ÿ
                    handleCollision();
                    obstacle.element.remove();
                    obstacles.splice(i, 1);
                    break;
                }
            }
            
            // æ£€æŸ¥ä¸çŒ«çš„ç¢°æ’ï¼ˆå½©è›‹ï¼‰
            for (let i = 0; i < cats.length; i++) {
                const cat = cats[i];
                
                if (
                    cat.lane === playerLane &&
                    cat.top + cat.height > playerRect.top &&
                    cat.top < playerRect.top + playerRect.height
                ) {
                    // åƒåˆ°çŒ«ï¼Œå¢åŠ ç”Ÿå‘½
                   lives = Math.min(lives + 1, 3); // ä¿æŒæœ€å¤§4æ¡å‘½
                   livesDisplay.textContent = 'â¤ï¸'.repeat(Math.min(lives, 3)) + 
                                            'â™¡'.repeat(3 - Math.min(lives, 3));

                    // æ˜¾ç¤º"å–µå–µå–µ"ç‰¹æ•ˆ
                    const meow = document.createElement('div');
                    meow.className = 'meow-effect';
                    meow.textContent = 'å–µå–µå–µ~';
                    meow.style.left = `${playerRect.left}px`;
                    meow.style.top = `${playerRect.top}px`;
                    gameScreen.appendChild(meow);
                    
                    // ç§»é™¤çŒ«å…ƒç´ 
                    cat.element.remove();
                    cats.splice(i, 1);
                    
                    // ç‰¹æ•ˆè‡ªåŠ¨ç§»é™¤
                    setTimeout(() => {
                        meow.remove();
                    }, 1500);
                    
                    break;
                }
            }
        }
        
        function handleCollision() {
            lives--;
            livesDisplay.textContent = 'â¤ï¸'.repeat(lives) + 'â™¡'.repeat(3 - lives);
            
            if (lives <= 0) {
                endGame(false);
            } else {
                // ç¢°æ’é—ªçƒæ•ˆæœ
                player.style.opacity = '0.5';
                setTimeout(() => {
                    player.style.opacity = '1';
                }, 200);
            }
        }
        
        function endGame(success) {
            gameRunning = false;
            cancelAnimationFrame(animationFrameId);
            
            if (success) {
                // ç§»é™¤å·²æœ‰çš„æŒ‰é’®å’Œè§’è‰²

                document.querySelectorAll('#end-screen button, #end-screen div').forEach(el => {

                    if (el !== restartButton) el.remove();
                });

                // åˆ°è¾¾ç»ˆç‚¹ï¼Œæ˜¾ç¤ºç”Ÿæ—¥ç¥ç¦
                gameScreen.style.display = 'none';
                endScreen.style.display = 'flex';
                
                // æ·»åŠ æŸ¥çœ‹æƒ…ä¹¦æŒ‰é’®
                const showLetterBtn = document.createElement('button');
                showLetterBtn.textContent = 'æŸ¥çœ‹æƒ…ä¹¦';
                showLetterBtn.style.marginTop = '20px';
                showLetterBtn.style.padding = '10px 20px';
                showLetterBtn.style.backgroundColor = '#FF4081';
                showLetterBtn.style.color = 'white';
                showLetterBtn.style.border = 'none';
                showLetterBtn.style.borderRadius = '50px';
                showLetterBtn.style.cursor = 'pointer';
                showLetterBtn.onclick = showLoveLetter;
                endScreen.appendChild(showLetterBtn);
                

            } else {
                // æ¸¸æˆç»“æŸ
                alert('æ¸¸æˆç»“æŸï¼ä½ è·‘äº† ' + distance + ' ');
                startScreen.style.display = 'flex';
            }
        }
        
        function showLoveLetter() {
            const content = document.getElementById('love-letter-content');
            content.innerHTML = '';
            
            // æ·»åŠ çˆ±å¿ƒè£…é¥°
            for (let i = 0; i < 15; i++) {
                const heart = document.createElement('div');
                heart.className = 'heart-decoration';
                heart.innerHTML = 'â¤ï¸';
                heart.style.left = `${Math.random() * 100}%`;
                heart.style.top = `${Math.random() * 100}%`;
                heart.style.animationDelay = `${Math.random() * 2}s`;
                content.appendChild(heart);
            }
            
            // é€è¡Œæ˜¾ç¤ºæƒ…ä¹¦å†…å®¹
            loveLetterLines.forEach((line, index) => {
                const p = document.createElement('p');
                p.className = 'love-letter-line';
                p.textContent = line;
                p.style.animationDelay = `${index * 0.3}s`;
                content.appendChild(p);
            });
            
            loveLetter.style.display = 'flex';
        }
    </script>
</body>
</html>
